# Data Model: HACS Publishing

**Feature**: 014-hacs-publishing
**Date**: 2025-12-15

## Configuration Files

### hacs.json Schema

**Location**: Repository root (`/hacs.json`)
**Purpose**: HACS configuration for integration discovery and installation

```json
{
  "name": "Buderus WPS Heat Pump",
  "render_readme": true
}
```

**Field Definitions**:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| name | string | Yes | Display name in HACS (should match manifest.json) |
| render_readme | boolean | No | Show README.md content in HACS UI (default: false) |
| content_in_root | boolean | No | Files at repo root instead of custom_components/ (default: false) |
| zip_release | boolean | No | Use zip file from releases (default: false) |
| filename | string | No | Main file name (not used for integrations) |
| homeassistant | string | No | Minimum HA version requirement |

**Validation Rules**:
- `name` must be non-empty string
- `name` should match `manifest.json` name for consistency
- All fields are optional except `name`

### manifest.json Schema (Existing)

**Location**: `custom_components/buderus_wps/manifest.json`
**Purpose**: Home Assistant integration metadata

```json
{
  "domain": "buderus_wps",
  "name": "Buderus WPS Heat Pump",
  "codeowners": ["@reinlemmens"],
  "config_flow": true,
  "documentation": "https://github.com/reinlemmens/buderus-wps-ha",
  "issue_tracker": "https://github.com/reinlemmens/buderus-wps-ha/issues",
  "requirements": ["pyserial>=3.5"],
  "version": "1.0.0",
  "iot_class": "local_polling",
  "integration_type": "device"
}
```

**HACS-Required Fields**:

| Field | Type | Required | Current Value |
|-------|------|----------|---------------|
| domain | string | Yes | "buderus_wps" |
| name | string | Yes | "Buderus WPS Heat Pump" |
| codeowners | string[] | Yes | ["@reinlemmens"] |
| documentation | URL | Yes | GitHub repo URL |
| issue_tracker | URL | Yes | GitHub issues URL |
| version | semver | Yes | "1.0.0" |

**Validation Rules**:
- `domain` must be valid Python identifier (lowercase, underscores)
- `version` must follow semantic versioning (MAJOR.MINOR.PATCH)
- `documentation` and `issue_tracker` must be valid URLs
- `codeowners` must be array of GitHub usernames with @ prefix

## GitHub Release Structure

### Release Metadata

**Tag Format**: `v{MAJOR}.{MINOR}.{PATCH}` (e.g., `v1.0.0`)
**Title Format**: `v{version} - {description}`

```yaml
tag: v1.0.0
title: v1.0.0 - Initial HACS Release
body: |
  ## Buderus WPS Heat Pump Integration

  First release compatible with HACS installation.

  ### Features
  - Temperature sensors (Outdoor, Supply, Return, DHW, Brine)
  - Compressor status monitoring
  - Energy blocking control
  - DHW extra production control

  ### Installation
  1. Add this repository as a custom repository in HACS
  2. Search for "Buderus WPS"
  3. Install and restart Home Assistant
  4. Add integration via Settings → Devices & Services
```

**Validation Rules**:
- Tag version must match `manifest.json` version
- Release must be published (not draft)
- Assets auto-generated by GitHub (source code zip/tar)

## Branding Assets

### Icon Files

**Location**: `custom_components/buderus_wps/branding/`

| File | Dimensions | Format | Purpose |
|------|------------|--------|---------|
| icon.png | 256×256 | PNG | Standard resolution icon |
| icon@2x.png | 512×512 | PNG | High DPI icon |
| icon.svg | 512×512 | SVG | Source vector |
| icon-transparent.svg | 512×512 | SVG | Transparent background source |

**For home-assistant/brands submission**:
| File | Dimensions | Required |
|------|------------|----------|
| icon.png | 256×256 | Yes |
| icon@2x.png | 512×512 | Recommended |
| logo.png | ≤256×128 | Optional |
| dark_icon.png | 256×256 | Optional |

**Design Specifications**:
- Colors: Buderus Blue (#004B87), Light Blue (#0073CF), Orange (#E85C0D)
- Transparent background preferred
- Square aspect ratio for icons (1:1)
- PNG format, lossless compression

## Entity Relationships

```
┌─────────────────┐
│   hacs.json     │
│                 │
│ name ──────────────┐
│ render_readme   │  │
└─────────────────┘  │
                     │ must match
┌─────────────────┐  │
│ manifest.json   │←─┘
│                 │
│ domain          │
│ name            │
│ version ────────────┐
│ documentation   │   │
│ issue_tracker   │   │
│ codeowners      │   │
└─────────────────┘   │
                      │ must match
┌─────────────────┐   │
│ GitHub Release  │←──┘
│                 │
│ tag (v1.0.0)    │
│ title           │
│ release notes   │
└─────────────────┘
```

## Validation Checklist

- [ ] `hacs.json` is valid JSON
- [ ] `hacs.json` name matches `manifest.json` name
- [ ] `manifest.json` has all required HACS fields
- [ ] `manifest.json` version is semantic versioning
- [ ] GitHub release tag matches manifest version
- [ ] Documentation URL is accessible
- [ ] Issue tracker URL is accessible
- [ ] Icon files are correct dimensions and format
